"use strict";var SCM=SCM||{};SCM.Utilities=SCM.Utilities||{},SCM.Utilities.LocalStorage=function(){var a="SCM",r=window.localStorage,o=[],n=[],i=[];return{getItem:function(e,t){e=(t=t||r).getItem(a+"."+e);return JSON.parse(e)},setItem:function(e,t,o){(o=o||r).setItem(a+"."+e,JSON.stringify(t))},removeItem:function(e,t){(t=t||r).removeItem(a+"."+e)},getItemCrossDomainNoCache:e,getItemCrossDomain:function(t,o){var r=s(o)+"."+t;void 0===CrossStorageClient?console.error("CrossStorageClient library is not available.  Falling back to localStorage"):u(o,t)||function(e,t){t=e+"::"+t;return-1!==n.indexOf(t)}(o,t)||(function(e,t){t=e+"::"+t;-1===n.indexOf(t)&&n.push(t)}(o,t),e(t,o).then(function(e){e&&(u(o,t)||(c(o,t),SCM.Utilities.LocalStorage.setItem(r,e)))}).catch(function(e){console.error("Failed to retrieve from cross-domain localStorage :: "+e.message)}));return SCM.Utilities.LocalStorage.getItem(r)},setItemCrossDomain:function(e,t,o){var r=s(o)+"."+e;{var n;SCM.Utilities.LocalStorage.setItem(r,t),c(o,e),o=void 0===CrossStorageClient?(console.error("CrossStorageClient library is not available.  Falling back to localStorage"),Promise.reject("CrossStorageClient library is not available")):(n=l(o),n.onConnect().then(function(){return n.set(a+"."+e,JSON.stringify(t))}).catch(function(e){console.error("Failed to retrieve / set cross-domain localStorage :: "+e.message)}))}return o},removeItemCrossDomain:function(e,t){{var o;void 0===CrossStorageClient?console.error("CrossStorageClient library is not available.  Falling back to localStorage"):(o=l(t)).onConnect().then(function(){return o.del(a+"."+e)}).catch(function(e){console.error("Failed to save to cross-domain localStorage :: "+e.message)})}SCM.Utilities.LocalStorage.removeItem(s(t)+"."+e)}};function e(t,e){var o;s(e);return void 0===CrossStorageClient?(console.error("CrossStorageClient library is not available."),Promise.reject("CrossStorageClient library is not available")):(o=l(e)).onConnect().then(function(e){return o.get(a+"."+t)}).then(function(e){return JSON.parse(e)}).catch(function(e){throw console.error("Failed to retrieve from cross-domain localStorage (nocache) :: "+e.message),e.message.includes("Could not access localStorage in hub")&&console.warn("It seems that the browser is set to block third-party cookies and data.  Cross-domain localStorage cannot function in this state."),e})}function s(e){return $("<a>",{href:e}).prop("hostname")}function l(e){for(var t=0;t<i.length;t++)if(i[t].hubUrl===e)return i[t].storage;var o=new CrossStorageClient(e,{timeout:15e3});return i.push({hubUrl:e,storage:o}),o}function c(e,t){t=e+"::"+t;-1===o.indexOf(t)&&o.push(t)}function u(e,t){return-1!==o.indexOf(e+"::"+t)}}(),$(document).ready(function(){$(".js-deepdyve-link").hide();var e,t,o,r,n=$(".js-deepdyve-link");0<n.length&&(e=n.data("doi"),t=n.data("issn"),o=n.data("eissn"),r=n.data("fieldname"),n=n.data("affiliate"),null!=e&&null!=r&&null!=n&&null!=t&&$.getJSON("https:////www.deepdyve.com/rental-link?docId="+e+"&journal="+(""==t?o:t)+"&fieldName="+r+"&affiliateId="+n+"&format=jsonp&callback=?",function(e){"ok"===e.status&&($(".js-deepdyve-link a").attr("href",e.url),$(".js-deepdyve-link").show())}))}),$(document).ready(function(){$("a.js-view-large").on("click",function(){var e=$("#hfArticleTitle").val();null!=e&&""!=e&&($(this).attr("href"),encodeURIComponent(e))})});
//# sourceMappingURL=article-page.min.js.map
